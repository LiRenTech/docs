# Project Graph v2 (基于 tauri)

v2 代指 2024 年 11 月份经过 tauri 框架重写之后的版本。

## 视野

### 移动

1. 按下 WSAD 键移动视野画面
2. 鼠标中键按下拖动
3. 鼠标中键按下一次后视野吸附移动，再按一次取消吸附
4. 按住空格键+鼠标左键拖拽
5. 鼠标侧键（还在实验中）

### 缩放

1. 鼠标滚轮缩放视野画面
2. 菜单栏有重置缩放

细节：

1. 画面缩放过大时（观看微观）会回到宏观状态
2. 设置中可以调整缩放的动画速度，默认是有缓动效果的，如果头晕可以把动画速度调到最快即可取消过渡

## 节点

**创建**

1. 双击空白部分
2. 工具栏中通过文本生成节点
3. 将 txt 文件拖入窗口中，会自动生成节点
4. 选中一个节点按下 tab，会出现一个虚拟生长位置，按下方向键可调整位置，再次按下 tab 键即可在该位置生成节点

**编辑内容**

1. 双击节点重命名
2. 选中节点后按下 Enter 键重命名
3. 编辑节点详情：按住 Ctrl 键双击节点，节点下方会出现多行文本输入框，可以编辑节点详情，节点详情可在设置界面中设置成只有鼠标悬浮在节点上方时才显示
4. 自动命名：在设置中可以设置自动命名，这样双击时可以快速创建连续标号的节点，详见设置界面

**移动**

选中一些节点可以拖拽移动

可以通过右侧工具栏的对齐按钮来对齐节点

**选中**

框选多个节点：鼠标左键在空白区域拖拽出一个框选

按住 Shift 在框选时加选、按住 Ctrl 在框选时交叉选择

**删除**

删除节点：同样使用切割线切节点来删除，也可以框选很多节点后按 Delete 键删除或点击删除图标

**复制**

复制多个节点：框选一些节点，按住 Alt 键+鼠标左键拖拽

**搜索**

搜索节点：Ctrl + F 搜索节点，搜索到内容后画面自动调整到合适大小

## 连线

选中一个或多个节点，再右键点击要连接的节点

## 节点树

当节点和连线组织起来形成一个庞大的网络时，有一些快捷操作

旋转：对准一个节点按住 Ctrl 键 旋转滚轮，会带动整个“子树”转动

移动：左键拖拽一个节点，但按住 Ctrl 键可以带动所有子节点拖动整个树

## 图片

利用其他截图软件截图后，直接在该软件中按 ctrl+v 即可粘贴到鼠标所在位置。

图片会在当前 json 文件旁边生成一个以 uuid 为名的图片文件。

> [!CAUTION]
> （注！以后可能会新出独立格式的工程文件，本质上是 zip，图片可能会放进去，请随时关注我们的动态）

## 弯折连线

按住反引号键（Tab 键上方的键）不放手，然后双击空白位置即可创建一个“质点”

选中质点后，质点膨胀成一个球体方便移动和连线。

这样就可以创建出自定义折线的弯曲效果。

> [!CAUTION]
> 以后可能会更新贝塞尔曲线的自定义调整来解决弯折问题

## 导出格式

目前仅支持 svg 和 markdown 格式。

后续可能会支持 xmind 等格式

## 工程文件的拆分与合并

**合并**：拖入一个 json 文件到画布中，会自动把另一个导图附加到当前工程场景中。

**拆分**：选中一些内容时，右侧工具栏会出现“将选中节点保存为新文件”，可以将当前工程文件拆出一部分独立保存。

## 文件快捷操作

闪电面板：

右上角有一个闪电图标，可以用于规定在软件打开启动时就加载的工程文件

您可以利用这个功能来快速设定不同的 todo list 界面

最近文件：

在左上角菜单中有最近文件列表，可以快速打开最近打开过的工程文件，还可以将最近打开的文件添加到闪电面板中

## 文件节点

当一个节点的文本恰好是一个文件的绝对路径时，就可以选中它，然后在右侧工具栏中点击“打开”，就能以系统默认方式打开这个文件。

可以利用这个来做 bat 文件，实现 Minecraft 中的命令方块的效果

## 网页链接节点

当一个节点的文本恰好是一个网页链接时，就可以选中它，然后在右侧工具栏中点击“打开”，就能弹出一个浏览器窗口打开这个链接。

选中 100 个节点，就会弹窗 100 个浏览器窗口！！

## 框

**框的特性**

1. 框内物体的移动会自动撑开框的大小。
2. 接近无限的嵌套层级，最大嵌套 996 层
3. 可以逐层展开和隐藏

**创建框**：选中一堆节点之后，点击右侧工具栏中的空心正方形图标，会将这些节点分组成一个框。

在框内双击可以创建新的节点。

**内部物体移出框**：选中一部分物体，按住 Alt 键的同时点击一下外部区域

**外部物体移入框**：选中一部分物体，按住 Alt 键的同时点击一下内部区域

**编辑框的名称**：双击框的边框

**删除框**：右键划线斩断框的边框

> [!CAUTION]
> 以后可能会将框的鼠标交互范围改为整个矩形而不是四个边

## 逻辑节点

当文本内容为特定的格式时，就会变成逻辑节点，例如 `#ADD#`

逻辑节点可以看成一个**函数**，例如 `#ADD#` 节点会执行加法运算。它输入无穷多个参数，输出一个值。

按住x键时，所有逻辑节点就会以屏幕刷新率的速度不停的执行。松开x键时，所有逻辑节点就会停止执行。

<center>
<svg xmlns="http://www.w3.org/2000/svg" width="242.24708807786283" height="322.4351721380481" viewBox="-5685.945267252739 1697.118910306965 242.24708807786283 322.4351721380481" style="background-color:rgba(31, 31, 31, 1)"><rect x="-5655.945267252739" y="1727.118910306965" width="60.95997619628906" height="60" rx="8" ry="8" fill="rgba(0, 0, 0, 0)" stroke="rgba(204, 204, 204, 1)" stroke-width="2"></rect><text x="-5625.465279154594" y="1771.118910306965" fill="rgba(204, 204, 204, 1)" font-size="32" text-anchor="middle" font-family="MiSans">15</text><rect x="-5520.866178442454" y="1723.6797655051225" width="47.167999267578125" height="60" rx="8" ry="8" fill="rgba(0, 0, 0, 0)" stroke="rgba(204, 204, 204, 1)" stroke-width="2"></rect><text x="-5497.282178808665" y="1767.6797655051225" fill="rgba(204, 204, 204, 1)" font-size="32" text-anchor="middle" font-family="MiSans">3</text><rect x="-5633.008738932295" y="1826.138781898565" width="143.8399658203125" height="60" rx="8" ry="8" fill="rgba(0, 0, 0, 0)" stroke="rgba(204, 204, 204, 1)" stroke-width="2"></rect><text x="-5561.088756022139" y="1870.138781898565" fill="rgba(204, 204, 204, 1)" font-size="32" text-anchor="middle" font-family="MiSans">#ADD#</text><rect x="-5591.342072265628" y="1929.5540824450131" width="61.855987548828125" height="60" rx="8" ry="8" fill="rgba(0, 0, 0, 0)" stroke="rgba(204, 204, 204, 1)" stroke-width="2"></rect><text x="-5560.414078491214" y="1973.5540824450131" fill="rgba(204, 204, 204, 1)" font-size="32" text-anchor="middle" font-family="MiSans">18</text><line x1="-5605.961156770562" y1="1787.118910306965" x2="-5580.592878406171" y2="1826.138781898565" stroke="rgba(204, 204, 204, 1)" stroke-width="2"></line><line x1="-5515.96474461677" y1="1783.6797655051225" x2="-5542.406190214034" y2="1826.138781898565" stroke="rgba(204, 204, 204, 1)" stroke-width="2"></line><line x1="-5560.893037150552" y1="1886.138781898565" x2="-5560.609797362801" y2="1929.5540824450131" stroke="rgba(204, 204, 204, 1)" stroke-width="2"></line></svg>
</center>

输入参数：

- 逻辑节点可以有多个输入，让多个节点连向它，就表示它有多个输入。

- 每个节点从左到右的位置顺序可以表示参数的位置顺序。例如 `#SUB#` 节点的第一个输入是 15，第二个输入是 3。它可以表示为 `15 - 3`。因此15节点应该摆在左边，3节点应该摆在右边。当您使用了对齐，使得两个节点的x坐标完全相同时，那谁先谁后就说不定了。

输出参数：

- 逻辑节点可以有多个输出，当逻辑节点执行时，就会生成一个节点并添加逻辑节点到它的连线。

详见自动计算引擎章节。

## AI

待完善
